<!DOCTYPE html>
<html lang="en-US" class="no-js">
<head>
<base href="" />

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>code &#8211; Page 2 &#8211; Unterbahn</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Unterbahn &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Unterbahn &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Unterbahn &raquo; code Category Feed" href="/category/code/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.5"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crp-style-rounded-thumbs-css'  href='/wp-content/plugins/contextual-related-posts/css/default-style.css?ver=4.9.5' type='text/css' media='all' />
<style id='crp-style-rounded-thumbs-inline-css' type='text/css'>

.crp_related a {
  width: 50px;
  height: 50px;
  text-decoration: none;
}
.crp_related img {
  max-width: 50px;
  margin: auto;
}
.crp_related .crp_title {
  width: 50px;
}
                
</style>
<link rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='/wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentysixteen-style-css'  href='/wp-content/themes/twentysixteen/style.css?ver=4.9.5' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='/wp-content/themes/twentysixteen/css/ie.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='/wp-content/themes/twentysixteen/css/ie8.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='/wp-content/themes/twentysixteen/css/ie7.css?ver=20160816' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.5" />
</head>

<body class="archive paged category category-code category-35 paged-2 category-paged-2 group-blog no-sidebar hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="/" rel="home">Unterbahn</a></p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-navigation-container"><ul id="menu-navigation" class="primary-menu"><li id="menu-item-2378" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2378"><a href="/projects/">Projects</a></li>
<li id="menu-item-2480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2480"><a href="http://instagram.com/unterbahn/">@unterbahn</a></li>
<li id="menu-item-2379" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2379"><a href="https://github.com/jywarren">Code</a></li>
<li id="menu-item-2380" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2380"><a href="https://publiclab.org/profile/warren">Public Lab</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
													<nav id="social-navigation" class="social-navigation" role="navigation" aria-label="Social Links Menu">
								<div class="menu-navigation-container"><ul id="menu-navigation-1" class="social-links-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2378"><a href="/projects/"><span class="screen-reader-text">Projects</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2480"><a href="http://instagram.com/unterbahn/"><span class="screen-reader-text">@unterbahn</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2379"><a href="https://github.com/jywarren"><span class="screen-reader-text">Code</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2380"><a href="https://publiclab.org/profile/warren"><span class="screen-reader-text">Public Lab</span></a></li>
</ul></div>							</nav><!-- .social-navigation -->
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Category: code</h1>			</header><!-- .page-header -->

			
<article id="post-952" class="post-952 post type-post status-publish format-standard hentry category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/10/installing-java-1-4-x-on-snow-leopard/" rel="bookmark">Installing Java 1.4.x on Snow Leopard</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><a href='http://oneswarm.cs.washington.edu/'>OneSwarm&#8217;s</a> wiki (<a href="http://wiki.oneswarm.org/index.php/OS_X_10.6_Snow_Leopard">link</a>) covers some easy steps for installing Java 1.4 on Snow Leopard. I needed it to get the MPowerPlayer SDK running so I could compile some code for Java-enabled mobile phones. Thanks to <a href="http://wheremydogs.at/index_files/fixing-the-preverifier-build-error-for-mpowerplayer-on-mac-os-x.php">wheremydogs.at</a> for pointing out that MPowerPlayer relies on some Java 1.4 classes.</p>
<pre>cd /tmp/
wget <a href="http://www.cs.washington.edu/homes/isdal/snow_leopard_workaround/java.1.4.2-leopard.tar.gz" class="external free" title="http://www.cs.washington.edu/homes/isdal/snow_leopard_workaround/java.1.4.2-leopard.tar.gz" rel="nofollow">http://www.cs.washington.edu/homes/isdal/snow_leopard_workaround/java.1.4.2-leopard.tar.gz</a>
tar -xvzf java.1.4.2-leopard.tar.gz
sudo mv 1.4.2 /System/Library/Frameworks/JavaVM.framework/Versions/1.4.2-leopard
cd /System/Library/Frameworks/JavaVM.framework/Versions/
sudo ln -s 1.4.2-leopard 1.4
open "/Applications/Utilities/Java Preferences.app"
</pre>
<p>For those of you also working with MPowerPlayer, the error I was getting is:</p>
<pre>
  $ ant
  Buildfile: build.xml
  
  compile:
  
  preverify:
       [exec] Error preverifying class java.lang.Class
       [exec]     VERIFIER ERROR java/lang/Class.newInstance0()Ljava/lang/Object;:
       [exec] Illegal type in constant pool
       [exec] Result: 1
  
  package:
  
  BUILD SUCCESSFUL
  Total time: 1 second</pre>
<p>But now that I have Java 1.4, it&#8217;s compiling fine.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/10/installing-java-1-4-x-on-snow-leopard/" rel="bookmark"><time class="entry-date published" datetime="2009-10-10T11:43:17+00:00">October 10, 2009</time><time class="updated" datetime="2009-10-10T11:44:03+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-947" class="post-947 post type-post status-publish format-standard hentry category-blog category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/10/get-rails-working-again-after-installing-macports/" rel="bookmark">Get Rails working again after installing MacPorts</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Mac Rails developers: I installed MacPorts to get RMagick, and it installed a new version of Ruby, without RubyGems. This meant that when I typed <b>script/server</b>, it claimed that:</p>
<p>&#8220;Rails requires RubyGems >= . Please install RubyGems and try again: http://rubygems.rubyforge.org&#8221;</p>
<p>MacPorts had added some crap to my PATH variable. If you edit your ~/.profile you&#8217;ll see this line:</p>
<p><code>export PATH=/opt/local/bin:/opt/local/sbin:$PATH</code></p>
<p>Just change that to:</p>
<p><code>export PATH=$PATH:/opt/local/bin:/opt/local/sbin</code></p>
<p>Then open a NEW shell prompt, i.e. a new Terminal window (this reloads the PATH variable)&#8230;</p>
<p>&#8230;and it&#8217;ll find your <i>OLD</i> version of Rails before the new MacPorts one, and things will work normally. You can confirm by typing &#8220;which ruby&#8221; in the terminal, and you should see &#8220;/usr/bin/ruby&#8221; NOT &#8220;/opt/local/bin/ruby&#8221;.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/10/get-rails-working-again-after-installing-macports/" rel="bookmark"><time class="entry-date published" datetime="2009-10-09T09:21:56+00:00">October 9, 2009</time><time class="updated" datetime="2009-10-10T11:44:31+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-940" class="post-940 post type-post status-publish format-standard hentry category-cloud-computing category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/10/amazon-s3-storage-search-interface/" rel="bookmark">Amazon s3 storage search interface</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I use Amazon S3 for backup, and find that it&#8217;s hard to use because there&#8217;s no search function, so I can&#8217;t see what I&#8217;ve backed up.</p>
<p>So, I extended s3cmd.rb (comes with the WONDERFUL <a href='http://s3sync.net/wiki'>s3cmd.rb rsync clone</a> for Amazon S3) with a search command.</p>
<p>Now I can use s3sync.rb to rsync my files up, then type:</p>
<blockquote><p>s3sync.rb search bucket_name:path/to/restrict/search search_term</p></blockquote>
<p>and I get, for example:</p>
<blockquote><p>backup/2009/spatial/jeff-spatial-vertical.key<br />
backup/2009/spatial/spatial-assignment-1-jeff.pdf<br />
backup/2009/spatial/spatial-assignment-1.key<br />
backup/2009/spatial/spatial-assignment-1.key.zip<br />
backup/2009/spatial/spatial-interface<br />
backup/2009/spatial/spatial-lecture-1<br />
backup/2009/spatial/spatial-lecture-1.key<br />
backup/2009/spatial/spatial-lecture-1.key.zip<br />
backup/2009/spatial/spatial-lecture-1/spatial-lecture-1.key<br />
backup/2009/spatial/spatial-lecture-1/spatial-lecture-1.pdf<br />
backup/2009/spatial/spatial-lecture-3.key<br />
backup/2009/spatial/spatial-lecture-3.mov<br />
backup/2009/spatial/spatial-lecture-3.pdf<br />
backup/2009/spatial/spatial-uploads<br />
backup/2009/spatial/spatial-wayfinding.key<br />
you just spent 6.0e-05 cents</p></blockquote>
<p>The last line is because the price of making a list request in s3 is $0.01 per 1000 requests in the US; so I thought it&#8217;d be a good idea to tell people how much they&#8217;re spending. </p>
<p>I&#8217;ll try to commit this to the main s3sync.net codebase, but for now you can just download it here: <a href='/wp-content/uploads/2009/10/s3sync.zip'>s3sync</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/10/amazon-s3-storage-search-interface/" rel="bookmark"><time class="entry-date published" datetime="2009-10-07T13:02:54+00:00">October 7, 2009</time><time class="updated" datetime="2010-02-12T12:16:05+00:00">February 12, 2010</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/cloud-computing/" rel="category tag">cloud computing</a>, <a href="/category/code/" rel="category tag">code</a></span><span class="comments-link"><a href="/2009/10/amazon-s3-storage-search-interface/#comments">2 Comments<span class="screen-reader-text"> on Amazon s3 storage search interface</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-896" class="post-896 post type-post status-publish format-standard hentry category-blog category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/10/composition-of-a-openstreetmap-api-responses/" rel="bookmark">Composition of a typical OpenStreetMap API response</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I&#8217;ve been wondering how much of the data transferred by the OpenStreetMap API is actual geometric data as opposed to timestamp and author data. I ran some rough numbers on a typical API response (in JSON, not XML, though these are relative measurements, so it shouldn&#8217;t matter too much). The file I examined is here: <a href='/wp-content/uploads/2009/09/dr5ru0.json'>dr5ru0.json</a> but my count is by number of characters and I did include formatting.</p>
<p><img src="/wp-content/uploads/2009/09/osm-composition1.png" alt="osm-composition" title="osm-composition" width="525" height="426" class="alignnone size-full wp-image-898" srcset="/wp-content/uploads/2009/09/osm-composition1.png 525w, /wp-content/uploads/2009/09/osm-composition1-369x300.png 369w" sizes="(max-width: 525px) 85vw, 525px" /></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/10/composition-of-a-openstreetmap-api-responses/" rel="bookmark"><time class="entry-date published" datetime="2009-10-01T07:25:41+00:00">October 1, 2009</time><time class="updated" datetime="2009-10-10T11:44:31+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-879" class="post-879 post type-post status-publish format-standard hentry category-blog category-cartagen category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/09/native-json-parsing-hooray/" rel="bookmark">Native JSON parsing&#8230; hooray, with benchmarks!</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I just tested the native JSON parser in Safari (this is also implemented in Firefox now, and IE8) and it dramatically speeds up the parsing of <a href='http://cartagen.org'>Cartagen&#8217;s</a> JSON data files! Take a look at these times for parsing six typical data plots in milliseconds:</p>
<p><em><b>prototype.js&#8217;s .evalJSON():</b><br />
parsed: 43<br />
parsed: 7<br />
parsed: 47<br />
parsed: 63<br />
parsed: 37<br />
parsed: 53<br />
<b>Native JSON.parse():</b><br />
parsed: 8<br />
parsed: 6<br />
parsed: 6<br />
parsed: 9<br />
parsed: 5<br />
parsed: 7<br />
</em></p>
<p>That&#8217;s a sixfold improvement!</p>
<p>And for Firefox 3.5:</p>
<p><em><b>prototype.js&#8217;s .evalJSON():</b><br />
parsed: 174<br />
parsed: 157<br />
parsed: 198<br />
parsed: 349<br />
parsed: 155<br />
parsed: 455<br />
parsed: 323<br />
parsed: 276<br />
parsed: 272<br />
<b>Native JSON.parse():</b><br />
parsed: 13<br />
parsed: 13<br />
parsed: 14<br />
parsed: 20<br />
parsed: 12<br />
parsed: 25<br />
parsed: 20<br />
parsed: 18<br />
parsed: 18<br />
</em></p>
<p>That&#8217;s more than 15 times the speed! </p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/09/native-json-parsing-hooray/" rel="bookmark"><time class="entry-date published" datetime="2009-09-27T08:07:13+00:00">September 27, 2009</time><time class="updated" datetime="2009-10-10T11:44:55+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/cartagen/" rel="category tag">cartagen</a>, <a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-827" class="post-827 post type-post status-publish format-standard hentry category-blog category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/08/adjustment-for-rails-find-method/" rel="bookmark">Adjustment for Rails &#8216;find()&#8217; method</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Rails performs an SQL SELECT statement like &#8220;SELECT * FROM table_name WHERE table_name.id IN (1,2,3,4,5)&#8221; when its .find() method is passed an array of IDs. But it fails if one of those ids is not found. Sometimes it&#8217;s useful to find all _available_ records, but not fail if not all are found. I adjusted the search for this scenario in my working copy of the OpenStreetMap Rails port:</p>
<pre>
# @nodes += Node.find(nodes_to_fetch, :include => :node_tags)
@nodes += Node.find(:all,:conditions => ["id IN ("+nodes_to_fetch.join(',')+")"], :include => :node_tags)
</pre>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/08/adjustment-for-rails-find-method/" rel="bookmark"><time class="entry-date published" datetime="2009-08-29T08:19:39+00:00">August 29, 2009</time><time class="updated" datetime="2009-10-10T11:45:31+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-809" class="post-809 post type-post status-publish format-standard hentry category-blog category-code tag-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/08/google-news-library-for-ruby/" rel="bookmark">Google News library for Ruby</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>I was surprised that Google News has no API, so I built my own: Using <a href="http://github.com/jnunemaker/httparty/tree/master">HTTParty</a>, I wrote a small Ruby library for Google News. Put this in a &#8216;googlenews.rb&#8217; file in the /lib/ directory of your Rails application to grab google news stories and topic lists.</p>
<p>Haven&#8217;t figured out how to get more than 10 items&#8230; Safari seems to be able to with feed://news.google.com?output=rss&#8230; but I&#8217;m not sure how.</p>
<pre>
gem "httparty"
require "httparty"

class Googlenews
  include HTTParty
  base_uri 'news.google.com'
  
  def self.items
    options = { :query => { :output => 'rss' } }
    features = self.get('/news', options)
    features['rss']['channel']['item']
  end
  
  def self.extract_topic(item)
    # ncl=duPfj30A5WoxBHMupoOtlciO1jY1M&amp;
    item['description'].match(/ncl=([a-zA-Z0-9]+)&amp;/)[1]
  end

  def self.topic(item)
    options = { :query => { :output => 'rss', :ncl => self.extract_topic(item) } }
    features = self.get('/news/more', options)
    features['rss']['channel']['item']
  end
  

  # store in database (unused)
  # def self.story(item)
    # item['category']
    # item['title']
    # item['guid']
    # item['description']
    # item['link']
    # item['pubDate']

    # t.string :category, :default => ''
    # t.string :title, :default => ''
    # t.string :guid, :default => ''
    # t.text :description, :default => ''
    # t.string :link, :default => ''
  # end

end
</pre>
<p>Once you&#8217;ve dropped this in /lib/, you can use it  in a Rails controller like this (I needed JSON, to work with the feed in JavaScript):</p>
<pre>
class DataController < ApplicationController

  def latest
    render :json => Googlenews.items
  end

end

</pre>
<p><em><b>Update:</b> to get more than 10 items, add a GET parameter &#8216;num=20&#8217; to the feed URL. This works both for topic and for the main feed. I haven&#8217;t confirmed this but I think it&#8217;s still limited to 30 items. Again, Safari manages to get more, but perhaps it does repeated queries. Still investigating. Anyways, that makes it:<br />
</em></p>
<pre> def self.items
    options = { :query => { :output => 'rss', :num => '20' } }
    features = self.get('/news', options)
    features['rss']['channel']['item']
  end </pre>
<p><em><b>Update:</b> This now has a real home on Github, where it&#8217;s called <a href="http://github.com/jywarren/ruby-googlenews">ruby-googlenews</a>.</em></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/08/google-news-library-for-ruby/" rel="bookmark"><time class="entry-date published" datetime="2009-08-20T11:48:22+00:00">August 20, 2009</time><time class="updated" datetime="2009-12-09T03:57:28+00:00">December 9, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/code/" rel="category tag">code</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="/tag/code/" rel="tag">code</a></span><span class="comments-link"><a href="/2009/08/google-news-library-for-ruby/#comments">2 Comments<span class="screen-reader-text"> on Google News library for Ruby</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-788" class="post-788 post type-post status-publish format-standard hentry category-blog category-code">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/08/nytimes-api/" rel="bookmark">NYTimes API</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><img src="/wp-content/uploads/2009/08/article_garden.jpg" alt="Article Garden" /></p>
<p>Excited to work with the <a href="http://developer.nytimes.com/">New York Times API</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/08/nytimes-api/" rel="bookmark"><time class="entry-date published" datetime="2009-08-03T14:07:16+00:00">August 3, 2009</time><time class="updated" datetime="2009-10-10T11:45:32+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/code/" rel="category tag">code</a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-784" class="post-784 post type-post status-publish format-standard hentry category-blog category-cartagen category-code tag-canvas tag-svg">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/08/svg-vs/" rel="bookmark">SVG vs. Canvas</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Well, SVG doesn&#8217;t scale well to large numbers of objects, but Canvas doesn&#8217;t scale well to large screens:</p>
<blockquote><p><img src="/wp-content/uploads/borismus.com/wp-content/uploads/2009/01/varying-number-of-objects.png" alt="Performance with many objects" /></p>
<p>Here are the results of the first fruitful experiment, which clearly shows that SVG performance degrades quickly (exponentially on Safari?) in the number of objects, but Canvas performance remains at a near-constant low. This makes sense, since Canvas is just a bitmap buffer, while SVG has to maintain additional references to each object that it renders. Also, though not pictured, note that performance in clearing an SVG element also decreases in the number of drawn objects.</p>
<p><img src="/wp-content/uploads/borismus.com/wp-content/uploads/2009/01/varying-drawing-area-height.png" alt="Performance on a large rendering context" /></p></blockquote>
<p>Via <a href="http://www.borismus.com/canvas-vs-svg-performance/">Boris Smus</a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/08/svg-vs/" rel="bookmark"><time class="entry-date published" datetime="2009-08-03T06:32:04+00:00">August 3, 2009</time><time class="updated" datetime="2009-10-10T11:45:32+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/cartagen/" rel="category tag">cartagen</a>, <a href="/category/code/" rel="category tag">code</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="/tag/canvas/" rel="tag">canvas</a>, <a href="/tag/svg/" rel="tag">svg</a></span><span class="comments-link"><a href="/2009/08/svg-vs/#comments">2 Comments<span class="screen-reader-text"> on SVG vs. Canvas</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

<article id="post-765" class="post-765 post type-post status-publish format-standard hentry category-blog category-cartagen category-code category-tutorials tag-cartagen tag-mapping tag-openstreetmap tag-rails">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="/2009/07/serving-osm-json-alongside-xml-from-the-openstreetmap-rails-port/" rel="bookmark">Serving &#8216;OSM-JSON&#8217; alongside XML from the OpenStreetMap Rails port</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p><a href="http://openstreetmap.org">OpenStreetMap.org</a>&#8216;s RESTful API allows anyone to access data on their continually growing collaborative map of the world&#8230; in XML. This is great for most applications, but if you&#8217;re working in JavaScript (as <a href="http://cartagen.org">we are</a>), XML might as well be greek. We need JSON.</p>
<p>To offer OSM-JSON along with of OSM-XML, we added a route to accept a &#8220;.format&#8221; suffix, and split up the render call based on the params[:format] part of the route:</p>
<pre>
# /config/routes.rb:46-50

map.connect "api/#{API_VERSION}/geohash/:geohash.:format", :controller => 'api', :action => 'geohash'
map.connect "api/#{API_VERSION}/geohash/:geohash", :controller => 'api', :action => 'geohash'

map.connect "api/#{API_VERSION}/map.:format", :controller => 'api', :action => 'map'
map.connect "api/#{API_VERSION}/map", :controller => 'api', :action => 'map'
</pre>
<p>Notice we also added a &#8216;geohash&#8217; route. Whereas the /map call requires a bbox parameter (&#8216;bbox=min_lon,min_lat,max_lon,max_lat&#8217;), we can use a <a href="http://en.wikipedia.org/wiki/Geohash">geohash</a> (<a href="http://github.com/davetroy/geohash-js/tree/master">Geohash in JavaScript</a>, <a href="http://github.com/davetroy/geohash/tree/master">Geohash in Rails</a>) which defines a bounding box as a sequence of letters and numbers. This fits Cartagen&#8217;s needs well, and since it doesn&#8217;t require any parameters, we can page cache it in Rails. (Remember that page caching bypasses Rails entirely, letting Apache handle these cached files at high speed &#8211; that saved us when we were on BoingBoing).</p>
<p> <a href="/2009/07/serving-osm-json-alongside-xml-from-the-openstreetmap-rails-port/#more-765" class="more-link">Continue reading<span class="screen-reader-text"> &#8220;Serving &#8216;OSM-JSON&#8217; alongside XML from the OpenStreetMap Rails port&#8221;</span></a></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=49&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ed820befcb541445eeb793842ef74a63?s=98&#038;d=mm&#038;r=g 2x' class='avatar avatar-49 photo' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="/author/admin/">Jeffrey Warren</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="/2009/07/serving-osm-json-alongside-xml-from-the-openstreetmap-rails-port/" rel="bookmark"><time class="entry-date published" datetime="2009-07-31T08:57:39+00:00">July 31, 2009</time><time class="updated" datetime="2009-10-10T11:45:33+00:00">October 10, 2009</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="/category/blog/" rel="category tag">Blog</a>, <a href="/category/cartagen/" rel="category tag">cartagen</a>, <a href="/category/code/" rel="category tag">code</a>, <a href="/category/tutorials/" rel="category tag">Tutorials</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="/tag/cartagen/" rel="tag">cartagen</a>, <a href="/tag/mapping/" rel="tag">mapping</a>, <a href="/tag/openstreetmap/" rel="tag">openstreetmap</a>, <a href="/tag/rails/" rel="tag">rails</a></span><span class="comments-link"><a href="/2009/07/serving-osm-json-alongside-xml-from-the-openstreetmap-rails-port/#comments">1 Comment<span class="screen-reader-text"> on Serving &#8216;OSM-JSON&#8217; alongside XML from the OpenStreetMap Rails port</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><a class="prev page-numbers" href="/category/code/">Previous page</a>
<a class='page-numbers' href='/category/code/'><span class="meta-nav screen-reader-text">Page </span>1</a>
<span aria-current='page' class='page-numbers current'><span class="meta-nav screen-reader-text">Page </span>2</span>
<a class='page-numbers' href='/category/code/page/3/'><span class="meta-nav screen-reader-text">Page </span>3</a>
<a class='page-numbers' href='/category/code/page/4/'><span class="meta-nav screen-reader-text">Page </span>4</a>
<a class="next page-numbers" href="/category/code/page/3/">Next page</a></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->



		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-navigation-container"><ul id="menu-navigation-2" class="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2378"><a href="/projects/">Projects</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2480"><a href="http://instagram.com/unterbahn/">@unterbahn</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2379"><a href="https://github.com/jywarren">Code</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2380"><a href="https://publiclab.org/profile/warren">Public Lab</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
							<nav class="social-navigation" role="navigation" aria-label="Footer Social Links Menu">
					<div class="menu-navigation-container"><ul id="menu-navigation-3" class="social-links-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2378"><a href="/projects/"><span class="screen-reader-text">Projects</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2480"><a href="http://instagram.com/unterbahn/"><span class="screen-reader-text">@unterbahn</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2379"><a href="https://github.com/jywarren"><span class="screen-reader-text">Code</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2380"><a href="https://publiclab.org/profile/warren"><span class="screen-reader-text">Public Lab</span></a></li>
</ul></div>				</nav><!-- .social-navigation -->
			
			<div class="site-info">
								<span class="site-title"><a href="/" rel="home">Unterbahn</a></span>
				<a href="https://wordpress.org/">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<link rel='stylesheet' id='wp-markdown-prettify-css'  href='/wp-content/plugins/wp-markdown/css/prettify.css?ver=1.6.1' type='text/css' media='all' />
<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20160816'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/twentysixteen/js/functions.js?ver=20160816'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.9.5'></script>
<script type='text/javascript' src='/wp-content/plugins/wp-markdown/js/prettify.min.js?ver=1.6.1'></script>
<script type='text/javascript' src='/wp-content/plugins/wp-markdown/js/markdown.min.js?ver=1.6.1'></script>
</body>
</html>
